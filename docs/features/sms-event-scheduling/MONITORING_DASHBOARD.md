# SMS Monitoring Dashboard - User Guide

**Status:** ‚úÖ Complete
**Location:** `/sms/monitoring`
**Last Updated:** 2025-10-08

---

## üìã Overview

The SMS Monitoring Dashboard provides real-time visibility into the health, performance, and operational status of the SMS Event Scheduling system. It's designed for system administrators and operations teams to quickly identify issues and monitor trends.

### Key Features

‚úÖ **Real-time System Health**: Instant view of overall system status (Healthy/Degraded/Critical)
‚úÖ **Today & Weekly Metrics**: Current and historical performance data
‚úÖ **Delivery Performance**: Visual tracking of SMS delivery rates
‚úÖ **LLM Performance**: AI message generation success rates and costs
‚úÖ **Active Alerts**: List of unresolved alerts with resolution actions
‚úÖ **Auto-refresh**: Automatic updates every 60 seconds
‚úÖ **Responsive Design**: Works on desktop, tablet, and mobile

---

## üöÄ Accessing the Dashboard

### URL

```
https://build-os.com/sms/monitoring
```

### Requirements

- Admin or operations role (authenticated user)
- Valid session with Supabase auth

---

## üìä Dashboard Components

### 1. System Health Status Card

**Location:** Top of dashboard

**Displays:**

- Overall system status (Healthy/Degraded/Critical)
- Health indicator icon and color
- Quick assessment of system operational state

**Status Indicators:**

- **üü¢ Healthy** (Green): All systems operational
    - Delivery rate ‚â• 90%
    - LLM success rate ‚â• 50%
    - No critical alerts

- **üü° Degraded** (Yellow): Performance below targets
    - Delivery rate 75-90% OR
    - LLM success rate 25-50% OR
    - Warning alerts active

- **üî¥ Critical** (Red): Significant issues detected
    - Delivery rate < 75% OR
    - LLM success rate < 25% OR
    - Critical alerts active

### 2. Metrics Summary

**Displays:** Today's metrics and 7-day totals

**Metrics Shown:**

#### Today's Activity

- **Scheduled**: SMS scheduled for delivery
- **Sent**: SMS sent to Twilio
- **Delivered**: SMS confirmed delivered to recipients
- **Failed**: SMS that failed to send or deliver

#### 7-Day Totals

- **Total Sent**: All SMS sent in past week
- **Total Delivered**: Successfully delivered messages
- **Delivery Rate**: Percentage of sent messages delivered
- **Total Failed**: Failed delivery attempts

#### LLM Performance

- **LLM Success Rate**: Percentage of messages generated by AI
- **LLM Generated**: Count of AI-generated messages
- **Template Fallback**: Count of template-generated messages
- **Avg Daily Cost**: Average LLM cost per day

#### Alert Summary

- **Unresolved Alerts**: Count of active alerts
- **Critical Alerts**: Presence of critical-severity alerts
- **Delivery Health**: Delivery rate health status
- **LLM Health**: LLM success rate health status

### 3. Delivery Performance Chart

**Displays:** Visual representation of delivery success

**Components:**

- **Progress Bar**: Visual breakdown of delivered/failed/pending messages
- **Delivery Rate Badge**: Large percentage display with color coding
- **Legend**: Numerical counts for each category
- **Health Message**: Assessment of delivery performance

**Color Coding:**

- Green (Delivered): Successfully delivered messages
- Red (Failed): Failed delivery attempts
- Gray (Pending): Messages awaiting delivery confirmation

**Health Thresholds:**

- ‚â• 90%: Healthy ‚úì
- 75-90%: Degraded ‚ö†
- < 75%: Critical ‚úï

### 4. LLM Metrics Chart

**Displays:** AI performance and cost tracking

**Components:**

- **Progress Bar**: LLM vs Template generation breakdown
- **Success Rate Badge**: Percentage with color coding
- **Cost Metrics**: Weekly total, daily average, per-message cost
- **Health Message**: LLM performance assessment

**Color Coding:**

- Blue (LLM): AI-generated messages
- Orange (Template): Template fallback messages

**Health Thresholds:**

- ‚â• 50%: Healthy ‚úì
- 25-50%: Degraded ‚ö†
- < 25%: Critical ‚úï

### 5. Active Alerts List

**Displays:** Unresolved system alerts

**Only shown when:** Alerts are active (unresolved_count > 0)

**Components:**

- **Alert Cards**: Individual cards for each alert
- **Severity Badges**: Critical/Warning/Info labels
- **Alert Details**: Metric value, threshold, notification status
- **Resolution Button**: Mark alerts as resolved

**Alert Card Information:**

- **Icon & Type**: Visual indicator and alert type name
- **Severity**: Critical/Warning/Info badge
- **Triggered Time**: How long ago alert fired
- **Message**: Human-readable description
- **Metric Value**: Current value that triggered alert
- **Threshold**: Configured threshold value
- **Channel**: Notification channel (Slack/PagerDuty/Email)
- **Notified**: Whether notification was sent

**Resolving Alerts:**

1. Review alert details
2. Address underlying issue (if needed)
3. Click "Mark as Resolved" button
4. Alert removed from dashboard and logged in history

---

## ‚öôÔ∏è Dashboard Controls

### Auto-Refresh Toggle

**Location:** Top-right header

**Functionality:**

- **ON**: Dashboard refreshes every 60 seconds automatically
- **OFF**: Manual refresh only (click Refresh button)

**Default:** ON

**Use Cases:**

- Keep ON for active monitoring sessions
- Turn OFF to pause updates while investigating issues

### Manual Refresh Button

**Location:** Top-right header

**Functionality:**

- Manually fetch latest data from API
- Useful when auto-refresh is disabled
- Shows spinner while loading

**Keyboard Shortcut:** None (click only)

### Last Updated Timestamp

**Location:** Top-right header

**Shows:**

- "Just now" for refresh < 1 minute ago
- "Xm ago" for refresh < 1 hour ago
- "Xh ago" for refresh < 1 day ago
- Full timestamp for older refreshes

---

## üé® Visual Design

### Color Palette

**Health Status:**

- Green (#10b981): Healthy metrics
- Yellow/Amber (#f59e0b): Warning/degraded metrics
- Red (#ef4444): Critical/failed metrics
- Blue (#3b82f6): LLM/AI-related metrics
- Gray (#6b7280): Neutral/pending items

**UI Elements:**

- White backgrounds for cards
- Light gray borders (#e5e7eb)
- Subtle shadows for depth
- Rounded corners (6-12px radius)

### Typography

- **Headers**: 1.25rem - 2rem, font-weight 600
- **Body**: 0.875rem - 1rem, font-weight 400
- **Metrics**: 1rem - 1.25rem, font-weight 600
- **Labels**: 0.75rem - 0.875rem, uppercase

### Responsive Breakpoints

- **Desktop**: > 768px (full layout)
- **Tablet**: 640-768px (adjusted grid)
- **Mobile**: < 640px (stacked layout)

---

## üìà Interpreting Metrics

### Delivery Rate

**Formula:** (Delivered / Sent) √ó 100

**Interpretation:**

- **> 95%**: Excellent - carrier issues minimal
- **90-95%**: Good - normal range
- **85-90%**: Fair - investigate patterns
- **< 85%**: Poor - immediate attention needed

**Common Causes of Low Delivery Rate:**

- Invalid phone numbers
- Carrier rejections
- Twilio account issues
- Network/connectivity problems

**Actions:**

1. Check "Failed" count in metrics
2. Review error logs in Supabase (`sms_messages` table)
3. Verify Twilio account status and balance
4. Check for patterns (specific carriers, times, users)

### LLM Success Rate

**Formula:** (LLM Generated / Total Generated) √ó 100

**Interpretation:**

- **> 80%**: Excellent - AI performing well
- **50-80%**: Good - acceptable range
- **25-50%**: Fair - investigate failures
- **< 25%**: Poor - AI model issues

**Common Causes of Low LLM Success:**

- OpenRouter API issues
- Rate limiting
- Model availability
- Prompt formatting errors

**Actions:**

1. Check OpenRouter API status
2. Review error logs in worker
3. Verify API key and credits
4. Check prompt templates for issues

### Cost Per Message

**Typical Range:** $0.0001 - $0.0005 (with DeepSeek)

**Interpretation:**

- **< $0.0002**: Excellent - efficient
- **$0.0002-$0.0005**: Good - normal range
- **$0.0005-$0.001**: High - review usage
- **> $0.001**: Very High - investigate

**Cost Drivers:**

- Model choice (DeepSeek vs GPT-4)
- Message length and complexity
- Token usage
- Generation attempts/retries

**Cost Optimization:**

1. Use DeepSeek (95% cheaper than GPT-4)
2. Optimize prompt length
3. Reduce retry attempts
4. Cache common responses

---

## üîß Troubleshooting

### Dashboard Not Loading

**Symptoms:** Blank page, loading spinner indefinitely

**Causes:**

- API endpoint errors
- Authentication issues
- Network connectivity

**Solutions:**

1. Check browser console for errors
2. Verify you're logged in (refresh session)
3. Check API status: `curl https://build-os.com/api/sms/metrics/summary`
4. Clear browser cache and reload

### Metrics Show Zero

**Symptoms:** All metrics display 0

**Causes:**

- No SMS activity in system
- Database migration not applied
- Metrics not being collected

**Solutions:**

1. Verify SMS system is active (check preferences)
2. Check database migration: `SELECT * FROM sms_metrics LIMIT 1;`
3. Review worker logs for metrics collection errors
4. Check materialized view: `SELECT * FROM sms_metrics_daily LIMIT 1;`

### Alerts Not Appearing

**Symptoms:** Expected alerts not showing on dashboard

**Causes:**

- Alerts resolved
- Cooldown period active
- Alert thresholds not configured
- Worker not running

**Solutions:**

1. Check alert history: `SELECT * FROM sms_alert_history ORDER BY triggered_at DESC LIMIT 10;`
2. Verify worker scheduler is running
3. Check alert thresholds: `SELECT * FROM sms_alert_thresholds WHERE enabled = true;`
4. Review worker logs for alert check errors

### Auto-Refresh Not Working

**Symptoms:** Dashboard doesn't update automatically

**Causes:**

- Auto-refresh disabled
- Browser tab inactive (throttled)
- JavaScript errors

**Solutions:**

1. Toggle auto-refresh OFF then ON
2. Check browser console for errors
3. Refresh page manually
4. Try in different browser/incognito mode

---

## üì± Mobile Usage

The dashboard is fully responsive and works on mobile devices:

### Mobile Layout Changes

- **Stacked Layout**: Components stack vertically
- **Full-Width Cards**: Cards expand to full width
- **Touch-Optimized**: Buttons sized for touch
- **Simplified Grid**: Metrics grid adjusts to mobile

### Mobile-Specific Tips

1. **Landscape Mode**: Better for charts
2. **Zoom**: Pinch-to-zoom works on charts
3. **Refresh**: Pull-down gesture doesn't work (use button)
4. **Alerts**: Swipe left on alert cards (future feature)

---

## üîó Related Documentation

- **Monitoring Guide**: [MONITORING_GUIDE.md](./MONITORING_GUIDE.md) - Complete setup and configuration
- **API Reference**: [MONITORING_GUIDE.md#api-endpoints](./MONITORING_GUIDE.md#api-endpoints) - API endpoint documentation
- **Alert Configuration**: [MONITORING_GUIDE.md#alert-configuration](./MONITORING_GUIDE.md#alert-configuration) - Threshold tuning
- **Implementation Status**: [IMPLEMENTATION_STATUS.md](./IMPLEMENTATION_STATUS.md) - Overall system status

---

## üí° Best Practices

### Daily Monitoring

1. **Morning Check** (5 minutes):
    - Review system health status
    - Check any overnight alerts
    - Verify delivery rate is healthy
    - Review LLM cost trends

2. **Throughout Day** (as needed):
    - Keep dashboard open with auto-refresh ON
    - Respond to critical alerts immediately
    - Investigate degraded status within 1 hour

3. **End of Day** (5 minutes):
    - Review daily totals
    - Resolve any remaining alerts
    - Check for unusual patterns

### Weekly Review

1. **Trend Analysis**:
    - Compare delivery rates week-over-week
    - Review LLM cost trends
    - Analyze failure patterns

2. **Optimization**:
    - Tune alert thresholds based on baselines
    - Identify cost reduction opportunities
    - Review and resolve old alerts

3. **Documentation**:
    - Document any recurring issues
    - Update runbooks
    - Share insights with team

---

## üÜò Getting Help

**For Dashboard Issues:**

- Check browser console for errors
- Review this documentation
- Check [MONITORING_GUIDE.md](./MONITORING_GUIDE.md) for detailed troubleshooting

**For SMS System Issues:**

- Review [IMPLEMENTATION_STATUS.md](./IMPLEMENTATION_STATUS.md)
- Check worker logs
- Consult [PHASE_6_PLAN.md](./PHASE_6_PLAN.md) for architecture

**For Alerts:**

- See [MONITORING_GUIDE.md#troubleshooting](./MONITORING_GUIDE.md#troubleshooting)
- Review PagerDuty/Slack notifications
- Check alert history in database

---

## üéØ Quick Reference

### Key Metrics Targets

| Metric           | Target       | Critical Threshold |
| ---------------- | ------------ | ------------------ |
| Delivery Rate    | ‚â• 90%        | < 75%              |
| LLM Success Rate | ‚â• 50%        | < 25%              |
| Avg Daily Cost   | < $0.01      | > $0.10            |
| Failed Count     | < 5% of sent | > 15% of sent      |

### Color Codes

- üü¢ Green: Healthy, on target
- üü° Yellow: Degraded, below target
- üî¥ Red: Critical, needs immediate attention
- üîµ Blue: Informational, AI-related
- ‚ö´ Gray: Neutral, pending

### Refresh Rates

- **Auto-refresh**: 60 seconds
- **Materialized View**: Hourly (via scheduler)
- **Alert Checks**: Hourly (via scheduler)
- **Manual Refresh**: Instant

---

**Dashboard is live and ready for monitoring! Access at: `/sms/monitoring`**
