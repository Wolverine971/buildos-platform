/* apps/web/src/lib/styles/inkprint.css */
/* BuildOS "Inkprint" Design System - Synesthetic texture layer */

/* ============================================
   CSS Variables - Inkprint Color System
   ============================================ */

:root {
	/* Paper & Ink base (light mode = paper studio) */
	--background: 40 20% 98%; /* warm paper white */
	--foreground: 240 10% 10%; /* deep ink black */

	/* Card surfaces */
	--card: 40 15% 96%;
	--card-foreground: 240 10% 10%;

	/* Muted surfaces */
	--muted: 40 10% 92%;
	--muted-foreground: 240 5% 45%;

	/* Border */
	--border: 40 10% 85%;

	/* Accent (BuildOS signal color) */
	--accent: 24 80% 55%; /* warm orange-amber */
	--accent-foreground: 0 0% 100%;

	/* Ring for focus states */
	--ring: 24 80% 55%;

	/* Destructive (danger/error states) */
	--destructive: 0 72% 51%; /* red-600 equivalent */
	--destructive-foreground: 0 0% 100%;

	/* Inkprint texture base color */
	--tx-ink: 240 10% 10%;
	--tx-ink-rgb: 24, 24, 27;

	/* Inkprint shadows */
	--shadow-ink: 0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.04);
	--shadow-ink-strong: 0 4px 12px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);
	--shadow-ink-inner: inset 0 1px 2px rgba(0, 0, 0, 0.05);
}

.dark {
	/* Ink room (dark mode) */
	--background: 240 10% 6%; /* near-black */
	--foreground: 40 10% 92%; /* off-white */

	/* Card surfaces */
	--card: 240 10% 10%;
	--card-foreground: 40 10% 92%;

	/* Muted surfaces */
	--muted: 240 10% 14%;
	--muted-foreground: 40 5% 55%;

	/* Border */
	--border: 240 10% 18%;

	/* Accent (glows slightly in dark) */
	--accent: 24 85% 58%;
	--accent-foreground: 240 10% 6%;

	/* Ring */
	--ring: 24 85% 58%;

	/* Destructive (brighter in dark mode for visibility) */
	--destructive: 0 72% 55%;
	--destructive-foreground: 0 0% 100%;

	/* Dark mode texture ink */
	--tx-ink: 40 10% 92%;
	--tx-ink-rgb: 235, 233, 228;

	/* Dark mode shadows */
	--shadow-ink: 0 1px 2px rgba(0, 0, 0, 0.2), 0 2px 4px rgba(0, 0, 0, 0.15);
	--shadow-ink-strong: 0 4px 12px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2);
	--shadow-ink-inner: inset 0 1px 2px rgba(0, 0, 0, 0.15);
}

/* ============================================
   Texture System - Base Classes
   ============================================ */

/* Base texture class - enables texture layer */
.tx {
	position: relative;
}

.tx::before {
	content: '';
	position: absolute;
	inset: 0;
	pointer-events: none;
	z-index: 1;
	border-radius: inherit;
	mix-blend-mode: multiply;
}

.dark .tx::before {
	mix-blend-mode: screen;
}

/* ============================================
   Texture Types - Semantic Meanings
   ============================================

   Bloom  - ideation, newness, creative expansion
   Grain  - execution, steady progress, craftsmanship
   Pulse  - urgency, sprints, deadlines, momentum
   Static - blockers, noise, overwhelm, risk
   Thread - relationships, collaboration, dependencies
   Frame  - canon, structure, decisions, officialness
   Strip  - header band, separator, printed label strip
*/

/* Bloom - radial halftone pattern */
.tx-bloom::before {
	background-image: radial-gradient(
		circle at 50% 50%,
		rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.04)) 1px,
		transparent 1px
	);
	background-size: 8px 8px;
}

/* Grain - diagonal line pattern (woodgrain feel) */
.tx-grain::before {
	background-image: repeating-linear-gradient(
		45deg,
		transparent,
		transparent 2px,
		rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.03)) 2px,
		rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.03)) 3px
	);
}

/* Pulse - horizontal stripe pattern (heartbeat) */
.tx-pulse::before {
	background-image: repeating-linear-gradient(
		0deg,
		transparent,
		transparent 3px,
		rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.04)) 3px,
		rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.04)) 4px
	);
}

/* Static - noise pattern (interference) */
.tx-static::before {
	background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
	opacity: var(--tx-opacity, 0.06);
}

/* Thread - crosshatch pattern (woven) */
.tx-thread::before {
	background-image:
		repeating-linear-gradient(
			45deg,
			transparent,
			transparent 4px,
			rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.025)) 4px,
			rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.025)) 5px
		),
		repeating-linear-gradient(
			-45deg,
			transparent,
			transparent 4px,
			rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.025)) 4px,
			rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.025)) 5px
		);
}

/* Frame - carved border effect (linocut) */
.tx-frame::before {
	background-image:
		linear-gradient(
			to right,
			rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.03)) 1px,
			transparent 1px
		),
		linear-gradient(
			to bottom,
			rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.03)) 1px,
			transparent 1px
		);
	background-size: 12px 12px;
}

/* Strip - horizontal band pattern (printed label) */
.tx-strip::before {
	background-image: repeating-linear-gradient(
		90deg,
		transparent,
		transparent 1px,
		rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.04)) 1px,
		rgba(var(--tx-ink-rgb), var(--tx-opacity, 0.04)) 2px
	);
}

/* ============================================
   Button Texture - Brushed Aluminum
   ============================================ */

/* tx-button - brushed metal texture for buttons */
.tx-button {
	position: relative;
	overflow: hidden;
}

.tx-button::before {
	content: '';
	position: absolute;
	inset: 0;
	pointer-events: none;
	z-index: 1;
	border-radius: inherit;
	background-image: url('/textures/brushed-alum.png');
	background-size: 100px 100px;
	background-repeat: repeat;
	opacity: 0.08;
	mix-blend-mode: overlay;
}

.dark .tx-button::before {
	opacity: 0.12;
	mix-blend-mode: soft-light;
}

/* Ensure button content stays above texture */
.tx-button > * {
	position: relative;
	z-index: 2;
}

/* ============================================
   Texture Intensities
   ============================================ */

.tx-weak {
	--tx-opacity: 0.03;
}

.tx-med {
	--tx-opacity: 0.06;
}

.tx-strong {
	--tx-opacity: 0.1;
}

/* ============================================
   Ink Frame - Carved Inner Border
   ============================================ */

.ink-frame {
	box-shadow:
		inset 0 0 0 1px rgba(var(--tx-ink-rgb), 0.06),
		inset 0 1px 0 rgba(var(--tx-ink-rgb), 0.04);
}

.dark .ink-frame {
	box-shadow:
		inset 0 0 0 1px rgba(var(--tx-ink-rgb), 0.08),
		inset 0 1px 0 rgba(var(--tx-ink-rgb), 0.06);
}

/* ============================================
   Spatial Emphasis - Layout Permission Layer
   ============================================

   Purpose:
   - Mode A (App): default dense, aligned, predictable.
   - Mode B (Marketing/Editorial/Transitions): opt-in spatial flare.

   Tokens:
   - sp-inline : list-level / dense / no layout break
   - sp-block  : normal card/section (default-ish)
   - sp-focus  : allowed to break grid, overlap, breathe (rare, opt-in)

   Notes:
   - These DO NOT add padding. They only authorize layout behavior + subtle presence.
*/

.sp-inline {
	/* Keep things tight and stable */
	isolation: isolate;
}

.sp-block {
	/* Mild emphasis; still command-center safe */
	isolation: isolate;
}

.sp-focus {
	/* Rare, opt-in: allow emphasis without forcing whitespace everywhere */
	position: relative;
	isolation: isolate;
	z-index: 2;
}

/* Optional: a tiny presence boost for focused elements without adding padding */
.sp-focus.sp-lift {
	transform: translateY(-1px);
}

/* ============================================
   Atmosphere Layer - Depth / Context (Opt-in)
   ============================================

   Use on: landing pages, blog, onboarding panels, creation moments, transitions.
   Avoid on: dense task lists, tables, command-center grids.

   How it works:
   - Adds a subtle background "field" behind content
   - Uses ::after so it doesn't collide with .tx::before texture grammar
*/

.atmo {
	position: relative;
	isolation: isolate;
}

.atmo::after {
	content: '';
	position: absolute;
	inset: -1px; /* slightly beyond border to avoid seams */
	pointer-events: none;
	z-index: 0;
	border-radius: inherit;
	opacity: var(--atmo-opacity, 0.25);
	mix-blend-mode: multiply;
	background:
		/* soft vignette */
		radial-gradient(120% 80% at 20% 0%, rgba(var(--tx-ink-rgb), 0.06), transparent 55%),
		radial-gradient(100% 70% at 90% 20%, rgba(var(--tx-ink-rgb), 0.05), transparent 60%),
		/* faint paper grain */
			linear-gradient(0deg, rgba(var(--tx-ink-rgb), 0.02), rgba(var(--tx-ink-rgb), 0.02));
}

/* Keep content above atmosphere */
.atmo > * {
	position: relative;
	z-index: 1;
}

.dark .atmo::after {
	mix-blend-mode: screen;
	opacity: var(--atmo-opacity, 0.22);
}

.atmo-weak {
	--atmo-opacity: 0.18;
}
.atmo-med {
	--atmo-opacity: 0.26;
}
.atmo-strong {
	--atmo-opacity: 0.34;
}

/* ============================================
   Grid-Break Utilities (Opt-in, Mode B)
   ============================================ */

.grid-break {
	/* lets a child break typical grid rhythm without new layout primitives */
	align-self: stretch;
}

@media (min-width: 640px) {
	.span-2 {
		grid-column: span 2 / span 2;
	}
	.span-3 {
		grid-column: span 3 / span 3;
	}
}

.flow-diagonal {
	/* subtle diagonal energy without making everything slanted */
	transform: skewY(-0.35deg);
	transform-origin: left top;
}

.overlap-1 {
	margin-top: -0.25rem;
}
.overlap-2 {
	margin-top: -0.5rem;
}
.overlap-3 {
	margin-top: -0.75rem;
}

/* “Float” for callouts / hero blocks (Mode B only) */
.float-left {
	float: left;
	margin-right: 0.75rem;
	margin-bottom: 0.5rem;
}
.float-right {
	float: right;
	margin-left: 0.75rem;
	margin-bottom: 0.5rem;
}

/* ============================================
   Rim / Edge Accents (Semantic Presence, Minimal)
   ============================================ */

.rim {
	box-shadow:
		inset 0 0 0 1px hsl(var(--border) / 0.9),
		0 0 0 1px hsl(var(--border) / 0.15);
}

.dark .rim {
	box-shadow:
		inset 0 0 0 1px hsl(var(--border) / 0.65),
		0 0 0 1px hsl(var(--foreground) / 0.06);
}

/* Accent rim for “orientation” moments: onboarding, creation, primary CTA */
.rim-accent {
	box-shadow:
		inset 0 0 0 1px hsl(var(--accent) / 0.35),
		0 0 0 1px hsl(var(--accent) / 0.12);
}

.dark .rim-accent {
	box-shadow:
		inset 0 0 0 1px hsl(var(--accent) / 0.45),
		0 0 0 1px hsl(var(--accent) / 0.18);
}

/* ============================================
   Interactive States
   ============================================ */

/* Pressable - tactile button interaction */
.pressable {
	transition:
		transform 100ms ease,
		opacity 100ms ease,
		box-shadow 100ms ease;
	transform: translateY(0);
}

.pressable:hover {
	opacity: 0.95;
}

.pressable:active {
	transform: translateY(1px);
}

/* ============================================
   Shadow Utilities
   ============================================ */

.shadow-ink {
	box-shadow: var(--shadow-ink);
}

.shadow-ink-strong {
	box-shadow: var(--shadow-ink-strong);
}

.shadow-ink-inner {
	box-shadow: var(--shadow-ink-inner);
}

/* ============================================
   Motion - Ink Set Animation
   ============================================ */

@keyframes ink-in {
	from {
		opacity: 0;
		transform: translateY(4px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes ink-out {
	from {
		opacity: 1;
		transform: translateY(0);
	}
	to {
		opacity: 0;
		transform: translateY(-4px);
	}
}

.animate-ink-in {
	animation: ink-in 180ms cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-ink-out {
	animation: ink-out 120ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* ============================================
   Utility Classes
   ============================================ */

/* Micro-label pattern for metadata */
.micro-label {
	font-size: 0.65rem;
	text-transform: uppercase;
	letter-spacing: 0.15em;
	color: hsl(var(--muted-foreground));
}

/* Ensure text remains readable over textures */
.tx > * {
	position: relative;
	z-index: 2;
}

/* ============================================
   Weight System - Semantic Mass
   ============================================

   Weight communicates:
   - Permanence: ephemeral ↔ canonical
   - Attention: ambient ↔ demanding
   - Hierarchy: supporting ↔ authoritative

   Tokens:
   - wt-ghost  : Suggestions, drafts, uncommitted, ephemeral
   - wt-paper  : Standard UI, working state (default)
   - wt-card   : Important, elevated, committed
   - wt-plate  : System-critical, immutable, modal-level

   Weight does NOT affect typography (intentional).
   Weight DOES affect motion (heavier = slower, more inertia).
   Weight is NOT inherited (explicit per-element).
*/

/* --- Weight CSS Custom Properties --- */
:root {
	/* Weight: Ghost - ephemeral, uncommitted */
	--wt-ghost-shadow: none;
	--wt-ghost-border-width: 1px;
	--wt-ghost-border-style: dashed;
	--wt-ghost-border-color: hsl(var(--border));
	--wt-ghost-bg: transparent;
	--wt-ghost-radius: 0.75rem;
	--wt-ghost-duration: 100ms;
	--wt-ghost-easing: ease-out;

	/* Weight: Paper - standard working state (default) */
	--wt-paper-shadow: var(--shadow-ink);
	--wt-paper-border-width: 1px;
	--wt-paper-border-style: solid;
	--wt-paper-border-color: hsl(var(--border));
	--wt-paper-bg: hsl(var(--card));
	--wt-paper-radius: 0.5rem;
	--wt-paper-duration: 150ms;
	--wt-paper-easing: ease;

	/* Weight: Card - elevated, important, committed */
	--wt-card-shadow: var(--shadow-ink-strong);
	--wt-card-border-width: 1.5px;
	--wt-card-border-style: solid;
	--wt-card-border-color: hsl(var(--border));
	--wt-card-bg: hsl(var(--card));
	--wt-card-radius: 0.5rem;
	--wt-card-duration: 200ms;
	--wt-card-easing: ease-in-out;

	/* Weight: Plate - canonical, immutable, system-critical */
	--wt-plate-shadow: var(--shadow-ink-strong), inset 0 1px 0 rgba(255, 255, 255, 0.03);
	--wt-plate-border-width: 2px;
	--wt-plate-border-style: solid;
	--wt-plate-border-color: hsl(var(--border));
	--wt-plate-bg: hsl(var(--card));
	--wt-plate-radius: 0.375rem;
	--wt-plate-duration: 280ms;
	--wt-plate-easing: cubic-bezier(0.4, 0, 0.2, 1);
}

.dark {
	/* Ghost: luminous hint instead of shadow */
	--wt-ghost-border-color: hsl(var(--border) / 0.5);

	/* Paper: subtle lift in dark mode */
	--wt-paper-shadow: var(--shadow-ink), 0 0 0 1px hsl(var(--border) / 0.5);

	/* Card: rim glow for perceived weight */
	--wt-card-shadow: var(--shadow-ink-strong), 0 0 0 1px hsl(var(--border) / 0.8);
	--wt-card-border-color: hsl(var(--border) / 0.9);

	/* Plate: luminous edge, carved presence */
	--wt-plate-shadow:
		var(--shadow-ink-strong), 0 0 0 1px hsl(var(--foreground) / 0.1),
		inset 0 1px 0 hsl(var(--foreground) / 0.05);
}

/* --- Weight Classes --- */

/* Ghost: ephemeral, uncommitted, suggestion */
.wt-ghost {
	box-shadow: var(--wt-ghost-shadow);
	border-width: var(--wt-ghost-border-width);
	border-style: var(--wt-ghost-border-style);
	border-color: var(--wt-ghost-border-color);
	background: var(--wt-ghost-bg);
	border-radius: var(--wt-ghost-radius);
	transition-duration: var(--wt-ghost-duration);
	transition-timing-function: var(--wt-ghost-easing);
}

/* Paper: standard working state (default) */
.wt-paper {
	box-shadow: var(--wt-paper-shadow);
	border-width: var(--wt-paper-border-width);
	border-style: var(--wt-paper-border-style);
	border-color: var(--wt-paper-border-color);
	background: var(--wt-paper-bg);
	border-radius: var(--wt-paper-radius);
	transition-duration: var(--wt-paper-duration);
	transition-timing-function: var(--wt-paper-easing);
}

/* Card: elevated, important, committed */
.wt-card {
	box-shadow: var(--wt-card-shadow);
	border-width: var(--wt-card-border-width);
	border-style: var(--wt-card-border-style);
	border-color: var(--wt-card-border-color);
	background: var(--wt-card-bg);
	border-radius: var(--wt-card-radius);
	transition-duration: var(--wt-card-duration);
	transition-timing-function: var(--wt-card-easing);
}

/* Plate: canonical, immutable, system-critical */
.wt-plate {
	box-shadow: var(--wt-plate-shadow);
	border-width: var(--wt-plate-border-width);
	border-style: var(--wt-plate-border-style);
	border-color: var(--wt-plate-border-color);
	background: var(--wt-plate-bg);
	border-radius: var(--wt-plate-radius);
	transition-duration: var(--wt-plate-duration);
	transition-timing-function: var(--wt-plate-easing);
}

/* --- Weight Motion Properties --- */

.wt-ghost,
.wt-paper,
.wt-card,
.wt-plate {
	transition-property: box-shadow, border-color, background-color, transform, opacity;
}

/* --- Reduced Motion --- */
@media (prefers-reduced-motion: reduce) {
	.wt-ghost,
	.wt-paper,
	.wt-card,
	.wt-plate {
		transition-duration: 0ms;
	}
}
