/* apps/web/src/lib/styles/containment.css */
/* CSS Containment - Opt-in performance isolation */

/*
   CSS Containment isolates elements from the rest of the DOM,
   allowing the browser to optimize rendering.

   IMPORTANT: Use opt-in classes only. Do NOT apply containment to broad
   selectors (all buttons, all images, etc.) as it can break tooltips,
   dropdowns, and positioned children that need to escape their container.

   contain: layout - Element's layout is independent
   contain: style  - Element's styles don't affect others
   contain: paint  - Element's rendering is isolated (clips overflow!)
   contain: size   - Element's size doesn't depend on descendants
*/

@layer utilities {
	/* Opt-out: Allow components to disable containment */
	.no-contain {
		contain: none !important;
	}

	/* Standard containment for independent components */
	.contain-standard {
		contain: layout style;
	}

	/* Full containment for truly isolated elements (clips overflow) */
	.contain-strict {
		contain: strict;
	}

	/* Layout-only containment (safe for most cases) */
	.contain-layout {
		contain: layout;
	}

	/* Style isolation */
	.contain-style {
		contain: style;
	}

	/* Paint isolation (clips overflow - use carefully) */
	.contain-paint {
		contain: paint;
	}

	/* Size containment (element must have explicit dimensions) */
	.contain-size {
		contain: size;
	}

	/* Combined: layout + style + paint (good for cards, list items) */
	.contain-content {
		contain: layout style paint;
		transform: translateZ(0);
	}
}

/*
   Usage examples:

   <!-- Card that's fully independent -->
   <div class="contain-content">...</div>

   <!-- Grid container, layout-only isolation -->
   <div class="contain-layout grid grid-cols-3">...</div>

   <!-- Element that needs to escape containment -->
   <div class="no-contain">...</div>
*/
