/* apps/web/src/lib/styles/performance-optimizations.css */
/* Rendering performance utilities - uses Inkprint semantic tokens */

/* ==================== Skeleton Loading ==================== */

/* Canonical skeleton implementation - use this one everywhere */
.skeleton-loader {
	contain: layout style paint;
	background: linear-gradient(
		90deg,
		hsl(var(--muted)) 25%,
		hsl(var(--border)) 50%,
		hsl(var(--muted)) 75%
	);
	background-size: 200px 100%;
	animation: skeleton-loading 1.5s infinite;
	will-change: background-position;
	transform: translateZ(0);
}

@keyframes skeleton-loading {
	0% {
		background-position: 200% 0;
	}
	100% {
		background-position: -200% 0;
	}
}

/* ==================== Scrollable Areas ==================== */

.scrollable-area {
	contain: layout style paint;
	-webkit-overflow-scrolling: touch;
	scrollbar-width: thin;
	overscroll-behavior: contain;
}

.scrollable-area::-webkit-scrollbar {
	width: 6px;
	opacity: 0;
	transition: opacity 200ms ease;
}

.scrollable-area:hover::-webkit-scrollbar {
	opacity: 1;
}

/* ==================== Content Visibility ==================== */

/* Skip rendering off-screen list items */
.cv-auto {
	content-visibility: auto;
}

/* ==================== Text Rendering ==================== */

/* Optimized for body text in dense views */
.optimized-text {
	text-rendering: optimizeSpeed;
	-webkit-font-smoothing: auto;
	-moz-osx-font-smoothing: auto;
}

/* For headings and important text */
.heading-text {
	text-rendering: optimizeLegibility;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

/* ==================== Optimized Images ==================== */

.optimized-image {
	contain: layout style paint;
	object-fit: cover;
	decoding: async;
}

/* ==================== Focus States ==================== */

.focus-optimized:focus-visible {
	outline: 2px solid hsl(var(--ring));
	outline-offset: 2px;
	box-shadow: 0 0 0 2px hsl(var(--ring) / 0.1);
}

/* ==================== Mobile Optimizations ==================== */

@media (max-width: 768px) {
	.scrollable-area {
		scroll-snap-type: y proximity;
		overscroll-behavior-y: contain;
	}
}

/* ==================== Reduced Motion ==================== */

@media (prefers-reduced-motion: reduce) {
	.skeleton-loader {
		animation: none;
	}

	* {
		will-change: auto !important;
	}
}

/* ==================== Print ==================== */

@media print {
	.skeleton-loader {
		display: none;
	}
}
