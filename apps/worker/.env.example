# Daily Brief Worker - Environment Configuration Example
# Copy this file to .env and fill in your actual values

# === REQUIRED ENVIRONMENT VARIABLES ===
# Supabase Configuration
PUBLIC_SUPABASE_URL=your_supabase_project_url
PRIVATE_SUPABASE_SERVICE_KEY=your_service_role_key

# Server Configuration
PORT=3001
NODE_ENV=development

# === OPTIONAL QUEUE CONFIGURATION ===
# Core Queue Settings
QUEUE_POLL_INTERVAL=5000          # How often to check for jobs (ms) - default: 5000
QUEUE_BATCH_SIZE=5                # Max concurrent jobs - default: 5
QUEUE_STALLED_TIMEOUT=300000      # Job stall timeout (ms) - default: 300000 (5 min)

# Retry Configuration
QUEUE_MAX_RETRIES=3               # Max retry attempts - default: 3
QUEUE_RETRY_BACKOFF_BASE=1000     # Base retry delay (ms) - default: 1000

# Progress Tracking
QUEUE_ENABLE_PROGRESS_TRACKING=true     # Enable progress updates - default: true
QUEUE_PROGRESS_UPDATE_RETRIES=3         # Progress update retry attempts - default: 3

# Health & Monitoring
QUEUE_STATS_UPDATE_INTERVAL=60000       # Stats logging interval (ms) - default: 60000 (1 min)
QUEUE_ENABLE_HEALTH_CHECKS=true         # Enable health monitoring - default: true

# Performance Tuning
QUEUE_WORKER_TIMEOUT=600000             # Max job execution time (ms) - default: 600000 (10 min)
QUEUE_ENABLE_CONCURRENT_PROCESSING=true # Enable concurrent job processing - default: true

# === ENVIRONMENT-SPECIFIC EXAMPLES ===

# Development Settings (fast feedback, smaller batches)
# QUEUE_POLL_INTERVAL=2000
# QUEUE_BATCH_SIZE=2
# QUEUE_STALLED_TIMEOUT=120000
# QUEUE_STATS_UPDATE_INTERVAL=30000

# Production Settings (optimized for throughput)
# QUEUE_POLL_INTERVAL=5000
# QUEUE_BATCH_SIZE=10
# QUEUE_STALLED_TIMEOUT=600000
# QUEUE_STATS_UPDATE_INTERVAL=300000

# Testing Settings (minimal delays, detailed logging)
# QUEUE_POLL_INTERVAL=1000
# QUEUE_BATCH_SIZE=1
# QUEUE_STALLED_TIMEOUT=30000
# QUEUE_STATS_UPDATE_INTERVAL=10000

# === EMAIL CONFIGURATION ===

# Option 1: Webhook Email (Recommended for Railway)
# USE_WEBHOOK_EMAIL=true                            # Enable webhook-based email sending
# BUILDOS_WEBHOOK_URL=https://build-os.com/webhooks/daily-brief-email  # Webhook endpoint
# PRIVATE_BUILDOS_WEBHOOK_SECRET=your-webhook-secret-key    # Shared secret for HMAC signature
# WEBHOOK_TIMEOUT=30000                             # Webhook request timeout in milliseconds

# Option 2: Gmail SMTP (Direct email sending)
# GMAIL_USER=your-gmail-account@gmail.com           # Your Gmail account
# GMAIL_APP_PASSWORD=your-app-password              # App-specific password (NOT your regular password)
# GMAIL_ALIAS=noreply@build-os.com                  # Alias email (must be verified in Gmail)
# EMAIL_FROM=noreply@build-os.com                   # Alternative to GMAIL_ALIAS
# EMAIL_FROM_NAME=BuildOS                          # Display name for sender

# How to set up Gmail for sending emails:
# 1. Go to https://myaccount.google.com/security
# 2. Enable 2-factor authentication if not already enabled
# 3. Go to "2-Step Verification" > "App passwords"
# 4. Generate a new app password for "Mail"
# 5. Use that generated password as GMAIL_APP_PASSWORD
#
# To use an alias like noreply@build-os.com:
# 1. In Gmail, go to Settings > Accounts > "Send mail as"
# 2. Click "Add another email address"
# 3. Enter your alias (e.g., noreply@build-os.com)
# 4. Complete the verification process
# 5. Once verified, you can use it as GMAIL_ALIAS
#
# Webhook Email Setup (for Railway deployments):
# 1. Set USE_WEBHOOK_EMAIL=true
# 2. Generate a secure secret: openssl rand -hex 32
# 3. Set PRIVATE_BUILDOS_WEBHOOK_SECRET to the generated secret
# 4. Configure the same secret in your BuildOS application
# 5. Ensure BUILDOS_WEBHOOK_URL points to your BuildOS instance

# === TWILIO CONFIGURATION (for SMS) ===
# Required for SMS functionality
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_MESSAGING_SERVICE_SID=MGxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_STATUS_CALLBACK_URL=https://your-domain.com/api/webhooks/twilio/status

# === PUSH NOTIFICATION CONFIGURATION ===
# Web Push VAPID Keys (for browser push notifications)
# Generate keys with: npx web-push generate-vapid-keys
# The public key MUST match the PUBLIC_VAPID_PUBLIC_KEY in apps/web/.env
VAPID_PUBLIC_KEY=BN...your_public_key_here
VAPID_PRIVATE_KEY=...your_private_key_here
VAPID_SUBJECT=mailto:support@buildos.com